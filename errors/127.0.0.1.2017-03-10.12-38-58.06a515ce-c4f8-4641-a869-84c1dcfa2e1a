(dp1
S'output'
p2
S"<type 'exceptions.TypeError'> cannot concatenate 'str' and 'NoneType' objects"
p3
sS'layer'
p4
S'/opt/python/web2py/web2py/applications/cvrf/controllers/admin.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n# intente algo como\n@auth.requires_membership("Administrador")\ndef website():\n    """\n    Admin website\n    """\n    response.flash = T("Administrate website")\n    response.title = T("Administrate website")+response.title\n\n    selectable = lambda ids: db(db.website.id.belongs(ids)).delete()\n\n    fields = [db.website.name, db.website.is_enabled, db.website.request_app]\n\n    grid = SQLFORM.smartgrid(db.website, selectable=selectable, fields=fields, linked_tables=[], exportclasses=dict(json=False, csv_with_hidden_cols=False, csv=False, xml=False, html=False))\n\n    heading=grid.elements(\'th\')\n    if heading:\n           heading[0].append(INPUT(_type=\'checkbox\', _onclick="jQuery(\'input[type=checkbox]\').each(function(k){jQuery(this).attr(\'checked\', \'checked\');});"))\n    return dict(grid=grid)\n\n@auth.requires_membership("Administrador")\ndef dashboard():\n    """\n    Admin dashboard\n    """\n    response.flash = T("Dashboard")\n    response.title = T("Dashboard")+response.title\n    return dict()\n\n@auth.requires_membership("Administrador")\ndef user():\n    """\n    Administrate users and users group\n    """\n\n    selectable = lambda ids: db(db.auth_user.id.belongs(ids)).delete()\n\n    grid = SQLFORM.smartgrid(db.auth_user, selectable=selectable, linked_tables=[\'auth_membership\'], ignore_rw=True, exportclasses=dict(json=False, csv_with_hidden_cols=False, csv=False, xml=False, html=False))\n\n    heading=grid.elements(\'th\')\n    if heading:\n           heading[0].append(INPUT(_type=\'checkbox\', _onclick="jQuery(\'input[type=checkbox]\').each(function(k){jQuery(this).attr(\'checked\', \'checked\');});"))\n\n    response.flash = T("Administrate users")\n    response.title = T("Administrate users")+response.title\n    return dict(grid=grid)\n\n@auth.requires_membership("Administrador")\ndef category():\n    """\n    Administrate categories\n    """\n    selectable = lambda ids: db(db.category.id.belongs(ids)).delete()\n\n    fields = [db.category.id, db.category.name]\n    grid = SQLFORM.smartgrid(db.category, fields=fields, selectable=selectable, linked_tables=[\'category\'])\n\n    heading=grid.elements(\'th\')\n    if heading:\n           heading[0].append(INPUT(_type=\'checkbox\', _onclick="jQuery(\'input[type=checkbox]\').each(function(k){jQuery(this).attr(\'checked\', \'checked\');});"))\n\n    response.title = T("Administrate categories") + response.title\n    response.flash = T("Administrate categories")\n    return dict(grid=grid)\n\n@auth.requires_membership("Administrador")\ndef table():\n    """\n    Administrate tables\n    """\n    table = request.args(0) or \'publisher\'\n    if not table in db.tables(): grid=None\n\n    selectable = lambda ids: db(db[table].id.belongs(ids)).delete()\n\n    grid = SQLFORM.smartgrid(db[table], args=request.args[:1], linked_tables=[], selectable=selectable)\n\n    heading=grid.elements(\'th\')\n    if heading:\n        heading[0].append(INPUT(_type=\'checkbox\', _onclick="jQuery(\'input[type=checkbox]\').each(function(k){jQuery(this).attr(\'checked\', \'checked\');});"))\n\n    response.flash = T(table.replace("_", " "))\n\n    return dict(grid=grid)\n\n@auth.requires_membership("Administrador")\ndef scheduler_task():\n    """\n    Administrate scheduler task\n    """\n    selectable = lambda ids: db_task(db_task.scheduler_task.id.belongs(ids)).delete()\n    fields = [db_task.scheduler_task.id, db_task.scheduler_task.task_name, db_task.scheduler_task.status, db_task.scheduler_task.function_name]\n\n    grid = SQLFORM.smartgrid(db_task.scheduler_task, selectable=selectable, linked_tables=[], fields=fields, exportclasses=dict(json=False, csv_with_hidden_cols=False, csv=False, xml=False, html=False))\n\n    heading=grid.elements(\'th\')\n    if heading:\n           heading[0].append(INPUT(_type=\'checkbox\', _onclick="jQuery(\'input[type=checkbox]\').each(function(k){jQuery(this).attr(\'checked\', \'checked\');});"))\n\n    response.flash = T("Administrate scheduler task")\n    response.title = T("Administrate scheduler task")+response.title\n    return dict(grid=grid)\n\n@cache.action()\ndef download():\n    return response.download(request, db)\n\nresponse._vars=response._caller(user)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/opt/python/web2py/web2py/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/opt/python/web2py/web2py/applications/cvrf/controllers/admin.py", line 109, in <module>\n  File "/opt/python/web2py/web2py/gluon/globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "/opt/python/web2py/web2py/gluon/tools.py", line 4241, in f\n    return action(*a, **b)\n  File "/opt/python/web2py/web2py/applications/cvrf/controllers/admin.py", line 39, in user\n    grid = SQLFORM.smartgrid(db.auth_user, selectable=selectable, linked_tables=[\'auth_membership\'], ignore_rw=True, exportclasses=dict(json=False, csv_with_hidden_cols=False, csv=False, xml=False, html=False))\n  File "/opt/python/web2py/web2py/gluon/sqlhtml.py", line 3102, in smartgrid\n    user_signature=user_signature, **kwargs)\n  File "/opt/python/web2py/web2py/gluon/sqlhtml.py", line 2765, in grid\n    nvalue = field.represent(value, row)\n  File "/opt/python/web2py/web2py/applications/cvrf/models/db.py", line 130, in <lambda>\n    db.auth_user.photo.represent = lambda value, register: IMG(_src=URL(\'static\', \'img/\'+value))\nTypeError: cannot concatenate \'str\' and \'NoneType\' objects\n'
p11
s.