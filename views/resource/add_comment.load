{{import datetime}}
{{from gluon.tools import prettydate}}

<ul class="nav">
{{for comment in comments:}}
    {{=LI(CAT(T("Created"), " ", prettydate(comment.created_on, T), T(" by "), comment.created_by.username, " ",XML(' <ico class="ico icon-comment"></ico> ')))}}

    {{=LI(CAT(IMG(_src="http://avatar.upr.edu.cu/"+comment.created_by.username+".jpeg", _style="max-width: 45px; border-radius: 50%; position: relative; float: left; margin-right: 5px;"), " ", XML(comment.body, sanitize=True, permitted_tags=['a', 'b', 'blockquote', 'br/', 'i', 'li', 'ol', 'ul', 'p', 'cite', 'code', 'pre'], allowed_attributes={'a':['href', 'title'], 'blockquote':['type']})), _class="comments")}}
    {{=LI("")}}
    <hr />
{{pass}}
</ul>

{{=form}}

{{block head}}
{{super}}
<link href="{{=URL('static', 'css/summernote/summernote.css')}}" rel="stylesheet" type="text/css" />
<link href="{{=URL('static', 'css/font-awesome.min.css')}}" rel="stylesheet" type="text/css" />

{{end}}

{{language = 'en-EN'}}
{{if (T.accepted_language == 'es' ):}}
   {{language = 'es-ES'}}
{{pass}}

{{block page_js}}
  {{super}}
  <script src="{{=URL('static', 'js/summernote/summernote.min.js')}}"></script>
    {{if language == 'es-ES':}}
       <script src="{{=URL('static', 'js/summernote/locales/summernote-es-ES.js')}}"></script>
    {{pass}}
<script>
 $(document).ready(function() {

     $('[data-toggle="tooltip"]').tooltip();

     /*Visibilidad*/
     $('#comment_body').summernote({
         fontNames: [],
            toolbar: [
            //[groupname, [button list]]
               ['style', []],
               ['font', []],
               ['fontsize', []],
               ['color', []],
               ['para', ['ul', 'ol']],
               ['height', []],
               ['insert', ['link']],
               ['misc', []],
            ],
            lang: '{{=language}}',
            height: 150,   //set editable area's height
    });
 });
</script>
{{end page_js}}
